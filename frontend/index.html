<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>智能法律助手</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div class="container">
  <!-- 左侧导航栏 -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <img src="image/法锤.png" alt="logo" />
        <span>智法云</span>
      </div>
    </div>
    <nav>
      <button id="nav-home" class="active"><img src="image/首页.png" alt="首页"> 首页</button>
      <button id="nav-ai"><img src="image/AI懂法.png" alt="AI懂法"> AI懂法</button>
      <button id="nav-contract"><img src="image/智能合同.png" alt="智能合同"> 智能合同</button>
      <button id="nav-doc"><img src="image/文书生成.png?v=1" alt="文书生成"> 文书生成</button>
      <button id="nav-quiz"><img src="image/法律答题.png" alt="法律答题"> 法律答题</button>
      <button id="nav-court"><img src="image/AI法庭.png" alt="AI法庭"> AI法庭</button>
    </nav>
    <div style="text-align: center; margin-top: 120px; margin-left: 20px;">
    
    </div>
  </aside>

  <!-- 右侧主内容区 -->
  <main class="main-content">
    <div id="page-home">
      <div class="home-header" style="display: flex; align-items: flex-start; justify-content: flex-start; padding: 40px 40px 0 40px;">
        <div style="flex:1; max-width: 520px;">
          <div class="law-search-tabs">
            <span class="law-search-tab active" data-type="all">关键词</span>
            <span class="law-search-tab" data-type="law">法律</span>
            <span class="law-search-tab" data-type="regulation">法规</span>
            <span class="law-search-tab" data-type="case">案例</span>
          </div>
          <div class="law-search-bar modern">
            <input type="text" id="law-search-input" placeholder="请输入您想查询的关键词" />
            <button id="law-search-btn">搜索</button>
          </div>
        </div>
      </div>
      <div id="law-card-search-result" style="display:none;">
        <div class="law-card" style="width:100%;max-width:900px;margin:0 auto;">
          <div class="law-card-title">检索结果</div>
          <div class="law-card-list" id="search-result-list"></div>
        </div>
      </div>
      <div id="law-card-multi">
        <div class="law-card-section">
          <div class="law-card" id="card-new-laws">
            <div class="law-card-title">法律</div>
            <div class="law-card-list" id="list-new-laws"></div>
          </div>
          <div class="law-card" id="card-new-regulations">
            <div class="law-card-title">法规</div>
            <div class="law-card-list" id="list-new-regulations"></div>
          </div>
          <div class="law-card" id="card-new-cases">
            <div class="law-card-title">案例</div>
            <div class="law-card-list" id="list-new-cases"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="page-ai" style="display:none;">
      <div class="ai-header" style="position:relative; padding:40px 0 0 0;">
        <button id="newChatBtn" onclick="startNewConversation()" style="position:absolute; left:40px; top:40px; background:transparent; border:none; padding:8px; border-radius:50%; cursor:pointer; display:flex; align-items:center; justify-content:center; box-shadow:none;">
          <img src="image/加号.png" alt="新一轮" style="width:36px;height:36px;">
        </button>
        <div style="margin:0 auto;text-align:center;">
          <h2 style="margin:0;">您好，我是您的AI法律助手</h2>
          <p>专注于法律领域的理解和推理，为您提供智能法律支持</p>
        </div>
      </div>
      <section class="chat-section" style="margin-top: 120px; height: 100%; display: flex; flex-direction: column;">
        <div class="chat-history" id="chatHistory" style="flex:1; min-height: 0;"></div>
        <div class="ai-bottom-bar" style="width:100%;background:#fff;position:relative;z-index:10;display:flex;flex-direction:column;align-items:flex-start;box-sizing:border-box;padding:20px 0 0 0;border-radius:16px;box-shadow:0 2px 8px rgba(111,74,142,0.08);margin-top:auto;margin-left:0px;margin-bottom:40px;">
          <div class="ai-toolbar" style="width:100%; display:flex; align-items:center; gap:16px; margin-bottom:10px;margin-left:60px;">
            <button class="history-float-btn" onclick="toggleHistorySidebar()" title="历史记录" style="position:static; width:40px; height:40px; min-width:40px; min-height:40px; box-shadow:none; display:flex; align-items:center; justify-content:center;">
              <img src="image/历史记录.png" alt="历史记录" style="width:20px;height:20px;">
            </button>
            <div style="position: relative;">
              <button onclick="toggleModelMenu()" id="modelBtn" style="padding: 8px 18px; border-radius: 8px; border: none; background: var(--main-purple); color: #fff; font-size: 15px; cursor: pointer;">选择大模型</button>
              <div id="modelMenu" style="display:none; position: absolute; top: 38px; left: 0; background: #fff; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); min-width: 120px; z-index: 20;">
                <div onclick="selectModel('通义千问')" style="padding: 10px 18px; cursor: pointer;">通义千问</div>
                <div onclick="selectModel('星火大模型')" style="padding: 10px 18px; cursor: pointer;">星火大模型</div>
                <div onclick="selectModel('智谱')" style="padding: 10px 18px; cursor: pointer;">智谱</div>
                <div onclick="selectModel('deepseek')" style="padding: 10px 18px; cursor: pointer;">DeepSeek</div>
              </div>
            </div>
            <span id="currentModel" style="color: var(--main-purple); font-size: 15px; margin-left: 8px;">当前模型：通义千问</span>
          </div>
          <div class="chat-input" style="width:100%;margin-left:60px;max-width:1000px;display:flex;">
            <input type="text" id="userInput" placeholder="请输入您的实际情况，智法云将为您解答！" style="flex:1;" />
            <button onclick="sendQuestion()">发送</button>
          </div>
          <div class="suggestions" style="margin-bottom:8px;margin-left:60px;">
            <button onclick="fillAndSend('朋友借了我10万块钱，约定两个月归还且不需要利息。已经半年过去了，对方还没还钱怎么办？')">朋友借了我10万块钱，约定两个月归还且不需要利息。已经半年过去了，对方还没还钱怎么办？</button>
            <button onclick="fillAndSend('如何判断一份合同是否有效？')">如何判断一份合同是否有效？</button>
            <button onclick="fillAndSend('空置房物业费要怎么和物业公司协商？')">空置房物业费要怎么和物业公司协商？</button>
          </div>
        </div>
      </section>
      <aside class="history-sidebar" id="historySidebar">
        <div class="tabs">
          <button class="active">历史</button>
          <button onclick="closeHistorySidebar()">×</button>
        </div>
        <input type="text" placeholder="请输入搜索内容" id="historySearch" />
        <div class="history-list" id="historyList"></div>
      </aside>
    </div>

    <div id="page-contract" style="display:none;">
      <div class="contract-review-center-wrapper" style="display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 120px);">
        <div class="contract-review-container" style="background:#fff;border-radius:12px;padding:60px 60px 48px 60px;max-width:900px;width:100%;min-height:600px;display:flex;flex-direction:column;align-items:center;">
          <h2 style="color:#6f4a8e;margin-bottom:32px;margin-top:0;text-align:center;width:100%;font-size:32px;font-weight:bold;">合同智能审查</h2>
          <div style="flex:1;width:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;">
            <div class="upload-section" style="margin-bottom:24px;width:100%;display:flex;flex-direction:column;align-items:center;">
              <input type="file" id="contractFile" accept=".txt,.docx,.pdf" style="display:none" />
              <div class="upload-box" id="uploadBox" style="border:2px dashed #a0a0ff;border-radius:8px;padding:60px 20px;width:100%;max-width:600px;text-align:center;color:#888;cursor:pointer;margin-bottom:16px;">
                <span id="uploadText" style="font-size:20px;"><img src="image/上传文件.png" alt="上传文件" style="width:40px;height:40px;vertical-align:middle;margin-right:10px;">点击或拖拽上传合同文件</span>
              </div>
              <button id="reviewBtn" disabled style="background:#4f7cff;color:#fff;border:none;border-radius:6px;padding:10px 32px;font-size:16px;cursor:pointer;width:180px;">生成审查建议</button>
            </div>
            <!-- 历史记录列表 -->
            <div class="contract-history-section" style="width:100%;max-width:600px;margin-top:32px;">
              <h3 style="color:#6f4a8e;margin-bottom:16px;font-size:18px;text-align:center;">历史记录</h3>
              <div id="contractHistoryList" style="max-height:300px;overflow-y:auto;border:1px solid #eee;border-radius:8px;padding:20px;"></div>
            </div>
          </div>
        </div>
      </div>
      <!-- 审查建议弹出页面 -->
      <div id="contractReviewPopup" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:2000;display:none;justify-content:center;align-items:center;">
        <div class="contract-review-popup-content" style="background:#fff;border-radius:12px;padding:50px;max-width:800px;width:90%;max-height:80vh;overflow-y:auto;position:relative;">
          <button onclick="closeContractReviewPopup()" style="position:absolute;top:16px;right:16px;background:none;border:none;font-size:24px;cursor:pointer;color:#666;">×</button>
          <h3 style="color:var(--main-purple);margin-bottom:24px;font-size:24px;">合同审查建议</h3>
          <div id="contractReviewContent" style="line-height:1.6;color:#333;padding-left:10px;"></div>
        </div>
      </div>
    </div>
    <div id="page-doc" style="display:none; height:100%; background:linear-gradient(135deg,#f8fbff 60%,#e6f2ff 100%);min-height:100vh;">
      <div style="position:absolute;left:60px;top:36px;z-index:10;">
        <button id="docHistoryBtn" style="background:#fff;box-shadow:0 4px 24px rgba(80,140,255,0.10);color:#3576d8;border:none;border-radius:18px;padding:12px 44px;font-size:22px;font-weight:600;transition:all 0.2s;cursor:pointer;letter-spacing:3px;outline:none;">
          历史记录
        </button>
      </div>
      <!-- 历史记录侧边栏 -->
      <div id="documentHistorySidebar" style="position:fixed;right:-300px;top:0;width:300px;height:100vh;background:#fff;box-shadow:-2px 0 8px rgba(0,0,0,0.1);transition:right 0.3s;z-index:1000;display:flex;flex-direction:column;">
        <div style="padding:20px;border-bottom:1px solid #eee;">
          <h3 style="margin:0;color:#6f4a8e;">文书生成历史</h3>
        </div>
        <div id="documentHistoryList" style="flex:1;overflow-y:auto;padding:20px;"></div>
      </div>
      <div style="display:flex;flex-direction:column;align-items:center;justify-content:flex-start;width:100%;min-height:calc(100vh - 120px);padding-top:80px;">
        <!-- 蓝色介绍框，保留不动 -->
        <div style="background:linear-gradient(90deg,#4f8cff 60%,#6db6ff 100%);border-radius:40px;box-shadow:0 8px 32px rgba(80,140,255,0.13);max-width:900px;width:70%;height:70%;margin-bottom:48px;display:flex;align-items:center;justify-content:space-between;padding:48px 56px 48px 48px;position:relative;">
          <div style="display:flex;flex-direction:column;">
            <span style="font-size:38px;font-weight:800;color:#fff;letter-spacing:3px;margin-bottom:16px;">简明阐述需求，快速生成专业文书</span>
            <span style="font-size:20px;color:#eaf4ff;letter-spacing:1px;">在这里，您可以总结您的诉求，并一键生成专业法律文书，助力高效维权。</span>
          </div>
          <div style="position:absolute;right:0;top:0;width:120px;height:100%;background:linear-gradient(120deg,#ffb86c 10%,#fff0 80%);border-radius:0 40px 40px 0;z-index:0;"></div>
        </div>
        <!-- 二选一按钮+textarea+生成按钮 -->
        <div style="display:flex;gap:32px;margin-bottom:32px;">
          <button class="doc-type-btn selected" id="lawsuitBtn" type="button"
            style="background:#4f7cff;color:#fff;border:none;border-radius:28px;padding:20px 80px;font-size:26px;font-weight:700;box-shadow:0 4px 16px rgba(80,140,255,0.13);transition:all 0.18s;cursor:pointer;outline:none;letter-spacing:4px;">
            民事起诉状
          </button>
          <button class="doc-type-btn" id="defenseBtn" type="button"
            style="background:#fff;color:#4f7cff;border:2px solid #4f7cff;border-radius:28px;padding:20px 80px;font-size:26px;font-weight:700;box-shadow:0 4px 16px rgba(80,140,255,0.13);transition:all 0.18s;cursor:pointer;outline:none;letter-spacing:4px;">
            民事答辩状
          </button>
        </div>
        <div style="background:#fff;border-radius:36px;padding:56px 44px;min-width:540px;max-width:900px;width:92%;box-shadow:0 6px 32px rgba(80,140,255,0.10);display:flex;flex-direction:column;align-items:center;">
          <textarea id="docTextarea" placeholder="请简要描述您的案件事实、诉讼请求等信息……"
            style="width:100%;min-height:180px;border:none;border-radius:22px;padding:32px 24px;font-size:24px;color:#2056a8;background:#f7faff;resize:vertical;box-shadow:0 2px 8px rgba(80,140,255,0.06);transition:box-shadow 0.2s,border 0.2s;outline:none;"
            onfocus="this.style.boxShadow='0 4px 16px #6db6ff44';this.style.border='2px solid #6db6ff'"
            onblur="this.style.boxShadow='0 2px 8px rgba(80,140,255,0.06)';this.style.border='none'">
          </textarea>
          <button id="generateDocBtn" style="margin-top:32px;background:#4f7cff;color:#fff;border:none;border-radius:8px;padding:16px 60px;font-size:22px;font-weight:700;cursor:pointer;box-shadow:0 2px 8px #4f7cff22;transition:background 0.2s;">生成</button>
        </div>
      </div>
      <!-- 文书生成结果弹出页面 -->
      <div id="documentPopup" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);z-index:2000;display:none;justify-content:center;align-items:center;">
        <div style="background:#fff;border-radius:12px;padding:50px;max-width:800px;width:90%;max-height:80vh;overflow-y:auto;position:relative;">
          <button onclick="closeDocumentPopup()" style="position:absolute;top:16px;right:16px;background:none;border:none;font-size:24px;cursor:pointer;color:#666;">×</button>
          <h3 id="documentTitle" style="color:var(--main-purple);margin-bottom:24px;font-size:24px;">法律文书</h3>
          <!--在这里把生成的文书改成可编辑的-->

          <div id="documentContent" contenteditable="true" style="line-height:1.8;color:#333;padding:20px;white-space:pre-wrap;word-wrap:break-word;font-family:SimSun,宋体,serif;font-size:14px;min-height:400px;border:1px solid #eee;border-radius:8px;background:#fafafa;"></div>
          <button id="savePdfBtn" style="margin-top:20px;float:right;">保存为PDF</button>
        </div>
      </div>
    </div>
    <div id="page-quiz" style="display:none;"><div style="padding:40px;color:#807b9e;">法律答题（开发中）</div></div>
    <div id="page-court" style="display:none;"><div style="padding:40px;color:#807b9e;">AI法庭（开发中）</div></div>
  </main>
</div>

<!-- 引入JavaScript文件 -->
<script src="js/app.js"></script>
<script src="js/ai-legal.js"></script>
<script src="js/contract.js"></script>
<script src="js/document.js"></script>
<script src="js/html2pdf.bundle.min.js"></script>
</body>
</html> 
